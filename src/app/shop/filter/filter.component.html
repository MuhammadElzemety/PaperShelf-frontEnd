<div class="offcanvas offcanvas-start d-md-flex flex-column p-3 offcanvas-custom"
    style="max-height: 100vh; overflow-y: auto;" tabindex="-1" id="filterOffcanvas"
    aria-labelledby="filterOffcanvasLabel">
    <div class="offcanvas-header d-md-none">
        <h5 class="offcanvas-title fw-bold" id="filterOffcanvasLabel">Filters</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>

    <h5 class="mb-3 text-uppercase fw-bold border-bottom pb-2 d-none d-md-block">Filters</h5>

    <!-- Categories -->
    <div class="mb-4">
        <h6 class="fw-bold mb-2" style="color: var(--dark-gray);">Categories</h6>
        <div *ngFor="let category of displayedCategories">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" [id]="category"
                    [(ngModel)]="isCategorySelected[category]"
                    (ngModelChange)="onCategoryModelChange(category, $event)">
                <label class="form-check-label" [for]="category">{{ category }}</label>
            </div>
        </div>
        <button *ngIf="displayedCategories.length < categories.length" class="btn btn-sm btn-outline-primary mt-2"
            (click)="loadMoreCategories()">
            Load More
        </button>
    </div>

    <!-- Authors -->
    <div class="mb-4">
        <h6 class="fw-bold mb-2" style="color: var(--dark-gray);">Authors</h6>
        <div *ngFor="let author of displayedAuthors">
            <div class="form-check">
                <input type="checkbox" class="form-check-input" [id]="author" [(ngModel)]="isAuthorSelected[author]"
                    (ngModelChange)="onAuthorModelChange(author, $event)">
                <label class="form-check-label" [for]="author">{{ author }}</label>
            </div>
        </div>
        <button *ngIf="displayedAuthors.length < authors.length" class="btn btn-sm btn-outline-primary mt-2"
            (click)="loadMoreAuthors()">
            Load More
        </button>
    </div>

    <!-- Price Range -->
    <div class="mb-4">
        <h6 class="fw-bold mb-2" style="color: var(--dark-gray);">Price Range</h6>
        <div class="d-flex align-items-center gap-2">
            <div class="input-group">
                <input type="number" class="form-control" [(ngModel)]="selectedPriceMin" [min]="priceFloor"
                    [max]="priceCeil" (blur)="applyFilters()" placeholder="Min">
            </div>
            <span class="fw-bold">-</span>
            <div class="input-group">
                <input type="number" class="form-control" [(ngModel)]="selectedPriceMax" [min]="priceFloor"
                    [max]="priceCeil" (blur)="applyFilters()" placeholder="Max">
            </div>
        </div>
    </div>

    <!-- Rating -->
    <div *ngFor="let rate of ratings">
        <div class="form-check">
            <input type="radio" name="rating" class="form-check-input" [id]="'rating' + rate" [value]="rate"
                [(ngModel)]="selectedRating" (ngModelChange)="changeRating($event)">
            <label class="form-check-label" [for]="'rating' + rate">
                <span [innerHTML]="getStars(rate)"></span>
            </label>
        </div>
    </div>

    <!-- Buttons -->
    <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-outline-secondary btn-sm" (click)="clearAll()">Clear All</button>
    </div>
</div>